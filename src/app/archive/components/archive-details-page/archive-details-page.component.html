<div class="archive-details-page">
  <div class="top-section standard-content-container-width">
      <app-case-details title="Gelöste Fälle" *ngIf="!!case" [case]=case></app-case-details>
  </div>
  <div class="help-container">
    <div class="flag"><i class="fas fa-flag"></i>&nbsp;Fall melden</div>
    <div class="life-ring"><i class="fas fa-life-ring"></i>&nbsp;Hilfe zu dieser Seite</div>
    <div class="chevron-right">anzeigen&nbsp;<i class="fas fa-chevron-right"></i></div>
  </div>
  <div class="bottom-section standard-content-container-width">
    <div class="case-details--tatbestand" *ngIf="!!reviewSituation">
      <div class="review-situation">
        <h2 class="review-situation--title">{{reviewSituation.title}}</h2>
        <div class="review-situation--text">
          <i class="fas fa-quote-left"></i>
            <div [innerHTML]="reviewSituation.text"></div>

          <i class="fas fa-quote-right"></i>
        </div>
      </div>
      <div class="links-section">
        <h3>Hinterlegte und entdeckte Links</h3>
        <div *ngIf="case && 'urls' in case">
          <span *ngFor="let url of case.urls" class="{{'link-icon' + url.is_safe ? 'gray-link' : ''}} ">
            <a href="{{url.url}}">
              <i class="far fa-external-link-square-alt"></i>
              {{url.url}}
            </a>
          </span>
        </div>
      </div>
      <div class="tags-section">
        <h3>Tags</h3>
        <ul *ngIf="case && 'tags' in case">
          <li *ngFor="let tag of case.tags">{{tag}}</li>
        </ul>
      </div>
      <div class="background-info-section">
        <h3>Hintergrundinformationen</h3>
        <ul>
          <span *ngIf="case && 'open_timestamp' in case" class="link-icon"><li><i class="far fa-calendar-alt"></i>{{case.open_timestamp}}</li></span>
          <span class="link-icon"><li><i class="fal fa-user"></i>Anonym</li></span>
        </ul>
      </div>
    </div>

    <div class="case-overview-section">
      <h2 class="overview-section--title">Fallabschlussbericht</h2>
      <div class="show-archive-result">
        <div class="mark">{{score}}</div>
        <div class="description">
          <div class="description-header">Dieser Fall ist nicht vertrauenswürdig</div>
          <div class="description-content">
            Dieser Fall ist von {{detectives.length}} Detektiven mit {{score}} von 100 Punkten bewertet worden. Du solltest die Informationen in diesem Fall unbedingt mit Vorsicht behandeln.
          </div>
        </div>
      </div>
      <div class="show-archive-detail">
        <div *ngFor="let answer of answers" class="show-archive-detail-description">
          <div *ngIf="percentageResponses.hasOwnProperty(answer) && percentageResponses[answer] > 0;then show_number else other_content">
          </div>

          <ng-template #show_number>
             <p class="show-archive-detail-mark">
              {{this.percentageResponses[answer]}}%
              <sub class="sub-description">Der Fragen wurden mit "<i>{{answer}}</i>" beantwortet.</sub>
            </p > 
          </ng-template> 
          <ng-template #other_content>
            <div>
              Keine Frage wurde mit "<i>{{answer}}</i>" beantwortet.  
            </div>
          </ng-template>
        </div>
        <!-- "Kriterium nicht anwendbar" -->

        <!-- <div class="show-archive-detail-description">Die Kriterien waren auf alle Fragen anwendbar.</div>
        20% Der Fragen hatten Kriterien die nicht anwendbar waren -->

       
      </div>
      <div class="archive-case-date-info">
        <div class="">Der Fall war 27 Tage aktiv.</div>
        <span><i class="far fa-calendar-check"></i>&nbsp;02.01.0001</span>
      </div>
      <div class="tag-icon-container">
        <div class="tag-icon-container-title">
          Folgendes trifft auf den Fall zu
        </div>
        <div class="tag-icon-container-content">
          <app-tag-icon *ngFor="let tag of tags" [tag]="tag"></app-tag-icon>
        </div>
      </div>
      <div class="detectives-container">
        <div class="detectives-container-title">Ermittelnde Detektive</div>
        <div class="detectives-container-body">


          <div *ngFor="let detective of detectives" class="detective-content">
            <!-- <div class="medal-container font-supernova"><i class="fas fa-medal"></i></div> -->
            <div class="profile-container">

              <div class="{{'avatar font-bold ' + detective.color}}">{{detective.avatarCharacter}}</div>
              <div class="profile-info">
                <div class="name font-bold">{{detective.user}}</div>
                <!-- <div class="job">Detective Superintendent</div> -->
              </div>
            </div>
          </div>

        <!--   <div class="detective-content">
            <div class="medal-container font-purple"><i class="fas fa-medal"></i></div>
            <div class="profile-container">
              <div class="avatar font-bold color__rating-tweeter">J</div>
              <div class="profile-info">
                <div class="name font-bold">Johanna Doe</div>
                <div class="job">Detective</div>
              </div>
            </div>
          </div>
          <div class="detective-content">
            <div class="medal-container"></div>
            <div class="profile-container">
              <div class="avatar font-bold color__rating-light-green">?</div>
              <div class="profile-info">
                <div class="name font-italic">Detective</div>
                <div class="job"></div>
              </div>
            </div>
          </div>
          <div class="detective-content">
            <div class="medal-container"></div>
            <div class="profile-container">
              <div class="avatar font-bold color__rating-green">?</div>
              <div class="profile-info">
                <div class="name font-italic">Detective</div>
                <div class="job"></div>
              </div>
            </div>
          </div>
          <div class="detective-content">
            <div class="medal-container"></div>
            <div class="profile-container">
              <div class="avatar font-bold color__purple">J</div>
              <div class="profile-info">
                <div class="name font-bold">Joe Doe</div>
                <div class="job">Detective</div>
              </div>
            </div>
          </div>
          <div class="detective-content">
            <div class="medal-container"></div>
            <div class="profile-container">
              <div class="avatar font-bold color__supernova">J</div>
              <div class="profile-info">
                <div class="name font-bold">Jens Doe</div>
                <div class="job">Detective</div>
              </div>
            </div>
          </div>
        </div> -->
      </div>
      <div class="comments-container">
        <div class="comments-container-title font-bold">
          Fallbewertungskommentare
        </div>
        <div *ngIf="case && 'comments' in case" class="comments-container-body">
          <div *ngFor="let comment of case.comments" class="comments-content">
            <div class="avatar-container">
              <div class="{{ 'avatar font-bold ' + comment.color }}">{{comment.name[0]}}</div>
            </div>
            <div class="content">
              <div class="name-date">
                <span class="name font-bold">{{comment.name}}</span>&nbsp;
                <span class="date">{{comment.date}}</span>
              </div>
              <p>{{comment.text}}</p>
            </div>
          </div>
        </div>

        <div class="show-case">
          <span class="font-bold title">Fallbearbeitung</span>&nbsp;<span class="explain">einblenden</span>&nbsp;<i class="fas fa-chevron-right"></i>
        </div>
      </div>
      <div class="comments-container">
        <div class="comments-container-title font-bold">
          Fallbewertungskommentare <span>ausblenden</span>&nbsp;<i class="fas fa-chevron-down"></i>
        </div>
        <div *ngIf="case && 'comments' in case" class="comments-container-body">
          <div *ngFor="let comment of case.comments" class="comments-content">
            <div class="avatar-container">
              <div class="{{ 'avatar font-bold ' + comment.color }}">
                {{comment.name[0]}}
              </div>
            </div>
            <div class="content">
              <div class="name-date">
                <span class="name font-bold">{{comment.name}}</span>&nbsp;
                <span class="date">{{comment.date}}</span>
              </div>
              <p>{{comment.text}}</p>
            </div>
          </div>
        </div>
      </div>
      <div class="discussions-button-container">
        <button>Mehr Kommentare laden</button>
      </div>
      <div class="reply-container">
        <div class="avatar-container">
          <div class="avatar font-bold color__purple">J</div>
        </div>
        <div class="reply-body">
          <div class="name font-bold">Joe Doe</div>
          <div class="input-container">
            <textarea id="" rows="5"></textarea>
          </div>
          <div class="reply-button-container">
            <button>Posten</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
